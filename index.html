<html lang="en">
  <head>
    <title>Terrain Maps</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="landmap.js"></script>
    <script type="text/javascript" src="main.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <!-- header -->
        <div class="row">
          <h1>Procedural Terrain Generation</h1>
          <h4>Generating and manipulating Diamond-Square maps.</h4>
          <p>A while ago I started reading about procedural map generation, and I started working with the Diamond Square Algoirthm. Shortly after getting a demo working I found that while the terrain being generated by the DS algorithm was interesting, it was more fun to play with different ways of manipulating the DS map. This page is a collection of terrain manipulation algorithms that I've implimented in Javascript. Each demonstration shows the initial Diamond Square map, as well as the algorithms applied to it.</p>
          <p>I've also experimented with ways to combine and overlap maps so that the resulting map has different types of toplogies in different areas of the map.</p>
          <p>To avoid freezing up with page with a lot of Javascript, each time you click "Generate" a web-worker is spun off to handle the processing required to generate, manipulate, and render a map. While this allows you to scroll and interact with the page, it should be noted that some of the demos take close to a minute to generate, and that's on a computer with a solid processor. Your milage may vary.</p>
          <p>
            <strong>Notes about demos</strong>
            <ul>
              <li>Maps are 256x256.</li>
              <li>All maps are rendered first in <code>canvas</code> elements, and then converted to images, to allow for responsive placement. (Also, it allows me to screenshot them more easily by just dragging the image out of the browser.)</li>
              <li></li>
            </ul>
          </p>
        </div>
        <!-- section -->
        <div>
          <hr>
          <div class="row">
            <h2>Standard Diamond-Square Algorithm</h2>
            <p>
              Diamon-Square with several different deviation parameters.
              <button class="run button-primary" id="standard">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-standard"></div>
        </div>
        <!-- section -->
        <div>
          <hr>
          <div class="row">
            <h2>Diamond-Square Algorithm with Smoothing Pass</h2>
            <p>
              Diamon-Square smoothed with average of neighbors in 10 point radius, and 20 point radius.
              <button class="run button-primary" id="smoothed">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-smoothed"></div>
          <hr>
        </div>
        <!-- section -->
        <div>
          <div class="row">
            <h2>Combining Diamond-Square Maps</h2>
            <p>
              Combining a DS, DS smoothed (10), and DS smoothed (20) maps. This is done by generating <code>standard</code>, then <code>standard-two</code>, a completely different map. Then using each of these to generate a smoothed version of themselves. Then
              we can combine standard with <code>standard-10</code>, using <code>standard-two-20</code> as the map controlling which parts of the map are used for the result. For example the higher the value of a given point on <code>standard-two-20</code>, the
              stronger the value taken from <code>standard</code> and assigned to the resulting map. The lower the value of a given point on <code>standard-two-20</code>, the stronger the value taken from <code>standard-10</code> and assigned to the resulting
              map.
            </p>
            <p>
              This allows us to generate a map that has terrain that is smooth in some parts, and rugged in other parts.
              <br>The final <code>reverse</code> map, is with the <code>standard</code> and <code>standard-10</code> maps swapped, so the smooth and rugged values are reversed.
              <button class="run button-primary" id="combined">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-combined"></div>
          <hr>
        </div>
        <!-- section -->
        <div>
          <div class="row">
            <h2>Greedy Raindrop Erosion Algorithm</h2>
            <p>
              For each point on the map, steal a certain percentage off the tallest neighbor. Results in blochy, plateau-like formations.
              <button class="run button-primary" id="grd">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-grd"></div>
          <hr>
        </div>
        <!-- section -->
        <div>
          <div class="row">
            <h2>Simple Erosion Algorithm</h2>
            <p>
              Randomly place a "droplet" of water on the map. For a number of iterations, let the droplet roll to it's nearest neighbor, eroding it's current point on the map if the droplet has not reached it carrying-capacity of sediment. If it has reached
              it's carrying capacity, deposit sediment on that point. Repeat this process with many more droplets.
              <button class="run button-primary" id="simpleErosion">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-simpleErosion"></div>
          <hr>
        </div>
        <!-- section -->
        <div>
          <div class="row">
            <h2>Complex Erosion Algorithm</h2>
            <p>
              Like <em>Simple Erosion Algorithm</em> but it uses velocity (with a minimum velocity ensure), slope (with a minimum slope ensured as well) to calculate carring capacity and depositing.
              <button class="run button-primary" id="complexErosion">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-complexErosion"></div>
          <hr>
        </div>
        <!-- section -->
        <div>
          <div class="row">
            <h2>Varous Maps</h2>
            <br>
            <h4>Smoothing, Greedy Raindrop, and Complex Erosion</h4>
            <p>
              Smoothing, Greedy Raindrop, and Complex Erosion algorithms applied to the same DS map.
              <button class="run button-primary" id="sample">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-sample"></div>
          <br>
          <div class="row">
            <h4>Combining Smooth, and Complex Erosion Maps</h4>
            <p>
              Combining smoothed map <code>p2</code> with an eroded map <code>p3</code>, by a third, unrelated smooth map <code>m2</code> to result in <code>c1 from (p3,p2,m2)</code>.
              Also generating <code>c2 from (p2,p3,m2)</code> by swapping first two maps.
              <button class="run button-primary" id="many">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-many"></div>
          <br>
          <div class="row">
            <h4>Smoothing a Complex Erosion Map</h4>
            <p>
              Eroding a map with Complex Erosion Algorithm before applying smoothing. <code>regular -> complexErosion -> smooth</code>
              <button class="run button-primary" id="smooth-complex-erosion">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-smooth-complex-erosion"></div>
          <br>
          <div class="row">
            <h4>Smoothing a Simple Erosion Map</h4>
            <p>
              Eroding a map with Simple Erosion Algorithm before applying smoothing. <code>regular -> simpleErosion -> smooth</code>
              <button class="run button-primary" id="smooth-simple-erosion">GENERATE</button>
            </p>
          </div>
          <div class="set" id="container-smooth-simple-erosion"></div>
          <hr>
        </div>
      </div>
    </div>
    <!-- hidden canvas for rendering-->
    <canvas class="hidden" id="tmp" width="256" height="256"></canvas>
  </body>
</html>
